window.batchAutocomplete=function(i,d,r){var c,u,t=i.getAttribute("debounce"),e=i.getAttribute("displaydata"),l=i.getAttribute("notFoundText")||"No results found",m={true:!0,false:!1}[i.getAttribute("showNotFound")]??!0,p=Number(i.getAttribute("take"))||5,t=t||700;const n=["state","address","city","name","zip"],a=t=>t.split(" ").map(t=>t.substr(0,1).toUpperCase()+t.substr(1)).join(" "),h=t=>Boolean(e)&&t[e]&&n.includes(e.toLowerCase())?(t=>{switch(e){case"address":case"city":return a(t);case"state":return t.toUpperCase();default:return t}})(t[e]):t.name,g=()=>{if(m){const t=document.getElementById("batchNoDataFound");t.removeAttribute("class"),t.innerHTML=""}};var s,o,v,b,f=document.getElementById("batch-loader");function y(t){t&&(function(t){for(var e=0;e<t.length;e++)t[e].classList.remove("autocomplete-active")}(t),t[c=(c=c>=t.length?0:c)<0?t.length-1:c].classList.add("autocomplete-active"))}function L(t){for(var e=document.getElementsByClassName("autocomplete-items"),n=0;n<e.length;n++)t!=e[n]&&t!=i&&e[n].parentNode.removeChild(e[n])}f.classList.add("d-none"),i.addEventListener("input",(s=async function(t){f.classList.remove("d-none");var e={searchCriteria:{query:i.value},options:{take:p,skip:0}};i.value.length<3&&0<!u?.length&&g(),3<=i.value.length&&await fetch(d,{method:"POST",body:JSON.stringify(e),headers:{Authorization:"Bearer "+r,Accept:"application/json","Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{u=t.result?.suggestions,f.classList.add("d-none"),(0===u?.length?()=>{if(m){const t=document.getElementById("batchNoDataFound");t.setAttribute("class","not-found"),t.innerHTML=l,document.querySelector(".batch-loading").appendChild(t)}}:g)(),200!==t?.status?.code&&(t=new CustomEvent("batch-auto-complete-error",{detail:t}),document.dispatchEvent(t))});var n,a,s,o=this.value;if(L(),f.classList.add("d-none"),!o)return!1;if(c=-1,(n=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),n.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(n),u?.length)for(s=0;s<u.length;s++)u[s].name&&((a=document.createElement("DIV")).setAttribute("class","autocomplete-list"),a.innerHTML="<img class='map-img' src='https://bst-staging-public.s3.us-west-2.amazonaws.com/map-icon-gray.svg'/>",a.innerHTML+="<strong>"+u[s].name.substr(0,o.length)+"</strong>",a.innerHTML+=u[s].name.substr(o.length),a.innerHTML+="<input type='hidden' value='"+u[s].name+"'>",a.objAddress=u[s],a.addEventListener("click",function(t){i.value=h(t.target.objAddress);t=new CustomEvent("batch-address-auto-complete",{detail:t.target.objAddress});document.dispatchEvent(t),L()}),n.appendChild(a))},o=t,function(){var t=this,e=arguments,n=v&&!b;clearTimeout(b),b=setTimeout(function(){b=null,v||s.apply(t,e)},o),n&&s.apply(t,e)})),i.addEventListener("keydown",function(t){i.value?.length<3&&0<!u?.length&&g();var e=(e=document.getElementById(this.id+"autocomplete-list"))&&e.getElementsByTagName("div");40==t.keyCode?(c++,y(e)):38==t.keyCode?(c--,y(e)):13==t.keyCode&&(t.preventDefault(),-1<c&&e&&e[c].click())}),document.addEventListener("click",function(t){L(t.target)})};